DROP TABLE Mesa;
CREATE TABLE Mesa (
  studId        INTEGER,
  uoSCode       VARCHAR(8),
  Semester      CHAR(2),
  grade         VARCHAR(2)
);

INSERT INTO Mesa VALUES (316424328,'INFO2120', 'S1', 'D');
INSERT INTO Mesa VALUES (305678453,'INFO2120', 'S1', 'HD');
INSERT INTO Mesa VALUES (316424328,'INFO3005', 'S1', 'CR');
INSERT INTO Mesa VALUES (305422153,'INFO3404', 'S2', 'P');
INSERT INTO Mesa VALUES (316424328,'COMP5338', 'S1', 'D');
INSERT INTO Mesa VALUES (309145324,'INFO2120', 'S1', 'F');
INSERT INTO Mesa VALUES (309187546,'INFO2005', 'S2', 'D');


COMMIT;
--SELECT * FROM Mesa;



CREATE PROCEDURE CALLMESA(STUID IN NUMBER, UCODE OUT VARCHAR2) AS
  uoSCode VARCHAR2(8);
  TYPE my_cursor IS REF CURSOR;
  the_cursor my_cursor;
BEGIN
  OPEN the_cursor
    FOR 'SELECT uoSCode 
           FROM Mesa 
          WHERE studId = :STUID'
    USING STUID;
  LOOP
    FETCH the_cursor INTO :UCODE;
    EXIT WHEN the_cursor%NOTFOUND;
    DBMS_OUTPUT.PUT_LINE(uoSCode);
  END LOOP;
  CLOSE the_cursor;
END CALLMESA;

--SELECT uoSCode FROM Mesa WHERE studId = 305678453;
